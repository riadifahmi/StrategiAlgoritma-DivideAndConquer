# utils.py
import requests
import time

def safe_get(url, params=None, retries=3, backoff=1.5):
    for i in range(retries):
        try:
            r = requests.get(url, params=params, timeout=15)
            r.raise_for_status()
            return r.json()
        except Exception as e:
            print("Request error:", e, "retrying...")
            time.sleep(backoff * (i+1))
    raise RuntimeError("Failed to fetch URL after retries.")
